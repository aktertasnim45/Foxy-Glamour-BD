{% extends "store/base.html" %}

{% block title %}My Dashboard | Foxy Glamour{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 40px auto; padding: 0 20px;">
    <h1 style="font-family: 'Cinzel', serif; font-size: 2rem; margin-bottom: 30px;">My Dashboard</h1>

    <div style="background: #fdfdfd; padding: 20px; border: 1px solid #eee; border-radius: 8px;">
        <div
            style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ddd; padding-bottom: 10px; margin-bottom: 20px;">
            <h2 style="font-size: 1.2rem; margin: 0;">Order History</h2>
            <a href="{% url 'accounts:password_change' %}" class="btn btn-outline"
                style="padding: 5px 15px; font-size: 0.8rem;">Change Password</a>
        </div>

        {% if orders %}
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="text-align: left; background: #f5f5f5;">
                    <th style="padding: 12px; border-bottom: 1px solid #ddd;">Order ID</th>
                    <th style="padding: 12px; border-bottom: 1px solid #ddd;">Date</th>
                    <th style="padding: 12px; border-bottom: 1px solid #ddd;">Total</th>
                    <th style="padding: 12px; border-bottom: 1px solid #ddd;">Status</th>
                    <th style="padding: 12px; border-bottom: 1px solid #ddd;">Details</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td style="padding: 12px; border-bottom: 1px solid #eee;">#{{ order.id }}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #eee;">{{ order.created|date:"M d, Y" }}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #eee;">TK. {{ order.get_total_cost }}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #eee;">
                        <span style="
                            padding: 4px 10px; 
                            border-radius: 20px; 
                            font-size: 0.85rem;
                            {% if order.status == 'Pending' %}background: #fff3cd; color: #856404;
                            {% elif order.status == 'Processing' %}background: #d1ecf1; color: #0c5460;
                            {% elif order.status == 'Shipped' %}background: #d4edda; color: #155724;
                            {% elif order.status == 'Delivered' %}background: #28a745; color: white;
                            {% elif order.status == 'Cancelled' %}background: #f8d7da; color: #721c24;
                            {% endif %}
                        ">
                            {{ order.status }}
                        </span>
                    </td>
                    <td style="padding: 12px; border-bottom: 1px solid #eee;">
                        <ul style="margin: 0; padding-left: 15px; font-size: 0.9rem; color: #666;">
                            {% for item in order.items.all %}
                            <li>{{ item.quantity }}x {{ item.product.name }}</li>
                            {% endfor %}
                        </ul>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>You haven't placed any orders yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}