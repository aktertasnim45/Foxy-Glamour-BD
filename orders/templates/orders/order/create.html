{% extends "store/base.html" %}

{% block title %}Checkout{% endblock %}

{% block content %}
    <h2>Checkout</h2>
    <div style="display: flex; gap: 40px; margin-top: 20px;">
        <div style="flex: 1;">
            <h3 style="border-bottom: 2px solid #5d4037; padding-bottom: 10px; margin-bottom: 20px;">Shipping Details</h3>
            <form action="." method="post" style="background: #f9f9f9; padding: 20px; border-radius: 5px;">
                {% csrf_token %}
                
                {% for field in form %}
                <div style="margin-bottom: 15px;">
                    <label style="display: block; font-weight: bold; margin-bottom: 5px;">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                        <div style="color: red; font-size: 0.9em;">{{ field.errors }}</div>
                    {% endif %}
                </div>
                {% endfor %}

                <input type="submit" value="Place Order" style="background-color: #5d4037; color: white; border: none; padding: 12px 20px; font-size: 1.1em; cursor: pointer; width: 100%; margin-top: 10px;">
            </form>
        </div>

        <div style="flex: 1; background: #fff; padding: 20px; border: 1px solid #ddd; height: fit-content;">
            <h3 style="margin-top: 0; color: #5d4037;">Your Order</h3>
            <ul style="list-style: none; padding: 0;">
                {% for item in cart %}
                    <li style="border-bottom: 1px solid #eee; padding: 10px 0; display: flex; justify-content: space-between;">
                        <span>{{ item.quantity }}x {{ item.product.name }}</span>
                        <span>${{ item.total_price }}</span>
                    </li>
                {% endfor %}
            </ul>
            <div style="border-top: 2px solid #333; margin-top: 15px; padding-top: 15px; font-weight: bold; font-size: 1.2em; display: flex; justify-content: space-between;">
                <span>Total</span>
                <span>${{ cart.get_total_price }}</span>
            </div>
        </div>
    </div>
{% endblock %}